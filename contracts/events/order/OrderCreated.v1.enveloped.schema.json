{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/contracts/events/order/OrderCreated.v1.enveloped.schema.json",
  "title": "OrderCreated Event v1 (Enveloped)",
  "allOf": [
    {
      "$ref": "../envelope/EventEnvelope.v1.schema.json"
    },
    {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "eventName": { "const": "OrderCreated" },
        "eventVersion": { "const": 1 },
        "producer": {
          "type": "string",
          "enum": ["order-service", "order-service-go"],
          "description": "Order service emitting the creation event"
        },
        "partitionKey": {
          "type": "string",
          "description": "Use the orderId to ensure ordering per order",
          "minLength": 1
        },
        "schema": {
          "type": "string",
          "const": "contracts/events/order/OrderCreated.v1.payload.schema.json"
        },
        "payload": {
          "$ref": "./OrderCreated.v1.payload.schema.json"
        }
      }
    }
  ]
}
